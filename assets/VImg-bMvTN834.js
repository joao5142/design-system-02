import{c as b,M as I,h as l,H as p,I as F,T as ee,N as te,O as ne,s as x,r as re,w as N,P as ae,G as se,Q as ie,R as V,S as le,F as oe,U as ue}from"./vue.esm-bundler-CUTHD45Y.js";import{d as _,g as A,n as ce,o as $,q as de,p as ge,a as ve,r as S,k as me,s as E}from"./colorUtils-BXtfXuor.js";import{g as M}from"./defineComponent-Dbwh0xau.js";const q=_({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function D(e){const r=A("useRender");r.render=e}function G(e){return ce(()=>{const r=[],n={};if(e.value.background)if($(e.value.background)){if(n.backgroundColor=e.value.background,!e.value.text&&de(e.value.background)){const t=ge(e.value.background);if(t.a==null||t.a===1){const s=ve(t);n.color=s,n.caretColor=s}}}else r.push(`bg-${e.value.background}`);return e.value.text&&($(e.value.text)?(n.color=e.value.text,n.caretColor=e.value.text):r.push(`text-${e.value.text}`)),{colorClasses:r,colorStyles:n}})}function Ne(e,r){const n=b(()=>({text:I(e)?e.value:r?e[r]:null})),{colorClasses:t,colorStyles:s}=G(n);return{textColorClasses:t,textColorStyles:s}}function fe(e,r){const n=b(()=>({background:I(e)?e.value:r?e[r]:null})),{colorClasses:t,colorStyles:s}=G(n);return{backgroundColorClasses:t,backgroundColorStyles:s}}const he=_({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function be(e){return{dimensionStyles:b(()=>{const n={},t=S(e.height),s=S(e.maxHeight),u=S(e.maxWidth),v=S(e.minHeight),d=S(e.minWidth),f=S(e.width);return t!=null&&(n.height=t),s!=null&&(n.maxHeight=s),u!=null&&(n.maxWidth=u),v!=null&&(n.minHeight=v),d!=null&&(n.minWidth=d),f!=null&&(n.width=f),n})}}function Se(e){return{aspectStyles:b(()=>{const r=Number(e.aspectRatio);return r?{paddingBottom:String(1/r*100)+"%"}:void 0})}}const L=_({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...q(),...he()},"VResponsive"),U=M()({name:"VResponsive",props:L(),setup(e,r){let{slots:n}=r;const{aspectStyles:t}=Se(e),{dimensionStyles:s}=be(e);return D(()=>{var u;return l("div",{class:["v-responsive",{"v-responsive--inline":e.inline},e.class],style:[s.value,e.style]},[l("div",{class:"v-responsive__sizer",style:t.value},null),(u=n.additional)==null?void 0:u.call(n),n.default&&l("div",{class:["v-responsive__content",e.contentClass]},[n.default()])])}),{}}}),ye=_({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function _e(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:me();return{roundedClasses:b(()=>{const t=I(e)?e.value:e.rounded,s=I(e)?e.value:e.tile,u=[];if(t===!0||t==="")u.push(`${r}--rounded`);else if(typeof t=="string"||t===0)for(const v of String(t).split(" "))u.push(`rounded-${v}`);else(s||t===!1)&&u.push("rounded-0");return u})}}const Ce=_({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:e=>e!==!0}},"transition"),R=(e,r)=>{let{slots:n}=r;const{transition:t,disabled:s,group:u,...v}=e,{component:d=u?ee:te,...f}=typeof t=="object"?t:{};return p(d,F(typeof t=="string"?{name:s?"":t}:f,typeof t=="string"?{}:Object.fromEntries(Object.entries({disabled:s,group:u}).filter(i=>{let[o,m]=i;return m!==void 0})),v),n)};function ke(e,r){if(!E)return;const n=r.modifiers||{},t=r.value,{handler:s,options:u}=typeof t=="object"?t:{handler:t,options:{}},v=new IntersectionObserver(function(){var m;let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],f=arguments.length>1?arguments[1]:void 0;const i=(m=e._observe)==null?void 0:m[r.instance.$.uid];if(!i)return;const o=d.some(y=>y.isIntersecting);s&&(!n.quiet||i.init)&&(!n.once||o||i.init)&&s(o,d,f),o&&n.once?Q(e,r):i.init=!0},u);e._observe=Object(e._observe),e._observe[r.instance.$.uid]={init:!1,observer:v},v.observe(e)}function Q(e,r){var t;const n=(t=e._observe)==null?void 0:t[r.instance.$.uid];n&&(n.observer.unobserve(e),delete e._observe[r.instance.$.uid])}const xe={mounted:ke,unmounted:Q},Re=_({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...L(),...q(),...ye(),...Ce()},"VImg"),Pe=M()({name:"VImg",directives:{intersect:xe},props:Re(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,r){let{emit:n,slots:t}=r;const{backgroundColorClasses:s,backgroundColorStyles:u}=fe(ne(e,"color")),{roundedClasses:v}=_e(e),d=A("VImg"),f=x(""),i=re(),o=x(e.eager?"loading":"idle"),m=x(),y=x(),g=b(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),C=b(()=>g.value.aspect||m.value/y.value||0);N(()=>e.src,()=>{w(o.value!=="idle")}),N(C,(a,c)=>{!a&&c&&i.value&&k(i.value)}),ae(()=>w());function w(a){if(!(e.eager&&a)&&!(E&&!a&&!e.eager)){if(o.value="loading",g.value.lazySrc){const c=new Image;c.src=g.value.lazySrc,k(c,null)}g.value.src&&se(()=>{var c;n("loadstart",((c=i.value)==null?void 0:c.currentSrc)||g.value.src),setTimeout(()=>{var h;if(!d.isUnmounted)if((h=i.value)!=null&&h.complete){if(i.value.naturalWidth||T(),o.value==="error")return;C.value||k(i.value,null),o.value==="loading"&&P()}else C.value||k(i.value),W()})})}}function P(){var a;d.isUnmounted||(W(),k(i.value),o.value="loaded",n("load",((a=i.value)==null?void 0:a.currentSrc)||g.value.src))}function T(){var a;d.isUnmounted||(o.value="error",n("error",((a=i.value)==null?void 0:a.currentSrc)||g.value.src))}function W(){const a=i.value;a&&(f.value=a.currentSrc||a.src)}let z=-1;ie(()=>{clearTimeout(z)});function k(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const h=()=>{if(clearTimeout(z),d.isUnmounted)return;const{naturalHeight:H,naturalWidth:O}=a;H||O?(m.value=O,y.value=H):!a.complete&&o.value==="loading"&&c!=null?z=window.setTimeout(h,c):(a.currentSrc.endsWith(".svg")||a.currentSrc.startsWith("data:image/svg+xml"))&&(m.value=1,y.value=1)};h()}const j=b(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),J=()=>{var h;if(!g.value.src||o.value==="idle")return null;const a=l("img",{class:["v-img__img",j.value],style:{objectPosition:e.position},src:g.value.src,srcset:g.value.srcset,alt:e.alt,crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:i,onLoad:P,onError:T},null),c=(h=t.sources)==null?void 0:h.call(t);return l(R,{transition:e.transition,appear:!0},{default:()=>[V(c?l("picture",{class:"v-img__picture"},[c,a]):a,[[ue,o.value==="loaded"]])]})},K=()=>l(R,{transition:e.transition},{default:()=>[g.value.lazySrc&&o.value!=="loaded"&&l("img",{class:["v-img__img","v-img__img--preload",j.value],style:{objectPosition:e.position},src:g.value.lazySrc,alt:e.alt,crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),X=()=>t.placeholder?l(R,{transition:e.transition,appear:!0},{default:()=>[(o.value==="loading"||o.value==="error"&&!t.error)&&l("div",{class:"v-img__placeholder"},[t.placeholder()])]}):null,Y=()=>t.error?l(R,{transition:e.transition,appear:!0},{default:()=>[o.value==="error"&&l("div",{class:"v-img__error"},[t.error()])]}):null,Z=()=>e.gradient?l("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,B=x(!1);{const a=N(C,c=>{c&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{B.value=!0})}),a())})}return D(()=>{const a=U.filterProps(e);return V(l(U,F({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!B.value},s.value,v.value,e.class],style:[{width:S(e.width==="auto"?m.value:e.width)},u.value,e.style]},a,{aspectRatio:C.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>l(oe,null,[l(J,null,null),l(K,null,null),l(Z,null,null),l(X,null,null),l(Y,null,null)]),default:t.default}),[[le("intersect"),{handler:w,options:e.options},null,{once:!0}]])}),{currentSrc:f,image:i,state:o,naturalWidth:m,naturalHeight:y}}});export{R as M,Pe as V,Ne as a,G as b,ye as c,_e as d,fe as e,he as f,be as g,Ce as h,q as m,D as u};
